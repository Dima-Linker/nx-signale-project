<div class="wink:container wink:mx-auto wink:p-4">
  @if (loading()) {
    <mat-progress-spinner mode="indeterminate"></mat-progress-spinner>
  } @else {
    @if (error();) {
      <mat-card class="wink:mb-8 wink:p-4">
        <mat-card-header>
          <mat-card-title class="wink:text-red-500">Artikel kann nicht geladen werden...</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <p>Versuche es noch einmal </p>
        </mat-card-content>
      </mat-card>
    } @else {
      <div class="wink:space-y-6">
        @for (article of articles(); track article.id ?? article.title) {
          <mat-card class="wink:hover:shadow-lg wink:transition-shadow">
            <mat-card-header>
              <mat-card-title class="wink:text-xl wink:font-semibold wink:text-gray-700">
                {{ article.title }}
              </mat-card-title>
            </mat-card-header>
            <mat-card-content>
              <p class="wink:text-gray-600 wink:mt-2">{{ article.content }}</p>
              <p class="wink:text-gray-500 wink:mt-10"><strong>Author:</strong> {{ article.author }} ({{ article.email }})</p>
              <p class="wink:text-gray-500 wink:mt-1"><strong>Created:</strong> {{ formatDate(article.createdAt) }}</p>

              @if (article.comments.length > 0) {
                <div class="wink:mt-4">
                  <h4 class="wink:text-lg wink:font-medium wink:text-gray-700">Comments</h4>
                  <mat-list class="wink:mt-2">
                    @for (comment of article.comments; track comment.text) {
                      <mat-list-item>
                        <div class="wink:text-gray-600">
                          <p>{{ comment.text }} - <em class="wink:text-gray-500">{{ comment.author }}</em></p>
                        </div>
                      </mat-list-item>
                    }
                  </mat-list>
                </div>
              }
            </mat-card-content>
          </mat-card>
        } @empty {
          <div class="wink:text-center wink:py-4">
            <p class="wink:text-gray-500">Keine Artikel vorhanden</p>
          </div>
        }
      </div>
    }
  }
</div>
